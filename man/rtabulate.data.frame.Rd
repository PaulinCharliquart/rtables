% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rtabulate.R
\name{rtabulate.data.frame}
\alias{rtabulate.data.frame}
\title{Split data.frame and apply functions}
\usage{
\method{rtabulate}{data.frame}(x, row_by_var = no_by("row_1"),
  col_by_var = no_by("col_1"), FUN = nrow, ..., row_col_data_args = FALSE,
  format = "xx", indent = 0)
}
\value{
an \code{\link{rtable}} project
}
\description{
Split data.frame and apply functions
}
\examples{
df <- expand.grid(aaa = factor(c("A", "B")), bbb = factor(c("X", "Y", "Z")))
df <- rbind(df, df)
df$val <- 1:nrow(df)

rtabulate(
  x = df,
  row_by_var = "aaa",
  col_by_var = "bbb",
  FUN = function(x) {  
     sum(x$val)
  }
)

rtabulate(
  x = iris,
  row_by_var = no_by("sum"),
  col_by_var = "Species", 
  FUN = function(x) sum(x$Sepal.Length)
)

rtabulate(
  x = iris,
  row_by_var = "Species",
  col_by_var = no_by("sum"), 
  FUN = function(x) sum(x$Sepal.Length)
)

tbl <- rtabulate(
  x = iris,
  FUN = function(cell_data) c(sum(cell_data$Sepal.Length), sd(cell_data$Sepal.Length)),
  format = "xx.xx (xx.xx\%)"
)

tbl 

row.names(tbl)
row.names(tbl) <- "Sum of Sepal Length"

tbl

iris2 <- iris
iris2$fsl5 <- factor(iris$Sepal.Length > 5, levels = c(TRUE, FALSE), labels = c("S.L > 5", "S.L <= 5"))

tbl <- rtabulate(
  x = iris2,
  row_by_var = "fsl5",
  col_by_var = "Species", 
  FUN = function(x_cell, x_row, x_col) {
    if (nrow(x_cell) < 10) {
      rcell("-")
    } else {
      fit <- lm(Sepal.Length ~ Petal.Width, data = x_cell)
      m_col <- mean(x_col$Sepal.Length)
      m_row <- mean(x_row$Sepal.Length)
    
      rcell(list(fit, m_col, m_row), format = function(x, output) {
        paste("df:", x[[1]]$df.residual,", and", round(x[[2]],1), ", and", round(x[[3]],2))
      })
    }
  } ,
  row_col_data_args = TRUE
)
tbl
}
